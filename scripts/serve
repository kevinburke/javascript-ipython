#!/bin/bash

set -eo pipefail

main() {
    local dir
    if [[ -n "$JAVASCRIPT_IPYTHON_DIR" ]]; then 
        dir="$JAVASCRIPT_IPYTHON_DIR"
    else
        local current_directory=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
        dir="$current_directory/../notebooks"
        mkdir -p "$dir"
    fi
    . venv/bin/activate; "$current_directory/../node_modules/.bin/ijs" --notebook-dir="$dir" --ijs-working-dir="$dir"
}
main
